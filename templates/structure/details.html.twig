{% extends 'base.html.twig' %}



{% block title %}{{ structure.name}}{% endblock %}

{% block breadcrumb %}
{% if is_granted('ROLE_PARTNER') %}
{% include "_partials/_breadcrumb.html.twig" %}
{% endif %}
{% endblock %}


{% block PageTitle %}{{ structure.name}}{% endblock %}

{% block body %}

{% if not app.user.isActivated %}
<div class="alert alert-warning alert-dismissible" role="alert">
    <button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close"></button>
    <div class="alert-message">
        <strong>Votre compte est actuellement désactivé.</strong>
    </div>
</div>
{% endif %}

{% if (app.user.isVerified and app.user.isActivated) or is_granted('ROLE_ADMIN') %}


<div id="content" class="row justify-content-center content">

    {% include "structure/_card.html.twig" %}
</div>
<div id="modules">
    <h2>Droits</h2>
    <div>
        {% for module in modules %}

        {{ module.module }}
        {% if module.is_activated %}
        {% set checked = 'checked' %}
        {% else %}
        {% set checked = '' %}
        {% endif %}

        <div class="form-check form-switch">
            <input class="form-check-input activate-module btn-lg" type="checkbox" role="switch" {{ checked }}
                data-role="{{ role }}" data-idmodule="{{ module.id_module }}" data-slug="{{ structure.slug }}">
        </div>

        {% endfor %}
    </div>

</div>
{% include "_partials/_modal_switch.html.twig" %}
{% include "_partials/_modal_delete.html.twig" %}
{% endif %}
{% endblock %}