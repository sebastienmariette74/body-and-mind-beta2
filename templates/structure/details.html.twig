{% extends 'base.html.twig' %}



{% block title %}{{ structure.name }}{% endblock %}

{% block breadcrumb %}
    {% if is_granted('ROLE_PARTNER') %}
        {% include "_partials/_breadcrumb.html.twig" %}
    {% endif %}
{% endblock %}


{% block PageTitle %}{{ structure.name }}{% endblock %}

{% block body %}

    {% if not app.user.isActivated %}
        <div class="alert alert-warning alert-dismissible" role="alert">
            <button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close"></button>
            <div class="alert-message">
                <strong>Votre compte est actuellement désactivé.</strong>
            </div>
        </div>
    {% endif %}

    {% if (app.user.isVerified and app.user.isActivated) or is_granted('ROLE_ADMIN') %}


        <div id="content" class="row justify-content-center content">

            {% include "structure/_card.html.twig" %}
        </div>
        <hr class=" mt-2 mb-4">
        <div id="modules" class="card-module pb-2" style="width: 18rem;">
            <h2 class="py-3 fw-bold m-0">Droits</h2>
            <hr class="mt-0 mb-2">
            <div class="row">
                {% for module in modules %}

                    {% set checked = module.is_activated ? 'checked' : '' %}

                    <div class="form-check form-switch form-switch-module">
                        <input class="form-check-input activate-module btn-lg col-2" type="checkbox"
                               role="switch" {{ checked }}
                               data-role="{{ role }}" data-idmodule="{{ module.id_module }}"
                               data-slug="{{ structure.slug }}">
                        <label class="col-9 label-module">{{ module.module }}</label>
                    </div>

                {% endfor %}
            </div>

        </div>
        {% include "_partials/_modal_switch.html.twig" %}
        {% include "_partials/_modal_delete.html.twig" %}
    {% endif %}
{% endblock %}